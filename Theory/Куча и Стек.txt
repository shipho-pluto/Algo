Стек

Стек используется для статичного выделения памяти. Он организован по принципу «последним пришёл — первым вышел» (LIFO).
Можно представить стек как стопку книг — разрешено взаимодействовать только с самой верхней книгой: прочитать её или
положить на неё новую.

благодаря упомянутому принципу, стек позволяет очень быстро выполнять операции с данными — все манипуляции производятся
с «верхней книгой в стопке». Книга добавляется в самый верх, если нужно сохранить данные, либо берётся сверху, если
данные требуется прочитать;
существует ограничение в том, что данные, которые предполагается хранить в стеке, обязаны быть конечными и статичными
— их размер должен быть известен ещё на этапе компиляции;
в стековой памяти хранится стек вызовов — информация о ходе выполнения цепочек вызовов функций в виде стековых кадров.
Каждый стековый кадр это набор блоков данных, в которых хранится информация, необходимая для работы функции на
определённом шаге — её локальные переменные и аргументы, с которыми её вызывали. Например, каждый раз, когда функция
объявляет новую переменную, она добавляет её в верхний блок стека. Затем, когда функция завершает свою работу,
очищаются все блоки памяти в стеке, которые функция использовала — иными словами, очищаются все блоки ее стекового
кадра;
каждый поток многопоточного приложения имеет доступ к своему собственному стеку;
управление стековой памятью простое и прямолинейное; оно выполняется операционной системой;
в стеке обычно хранятся данные вроде локальных переменных и указателей;
при работе со стеком есть вероятность получать ошибки переполнения стека (stack overflow), так как максимальный его
размер строго ограничен. Например, ошибка при составлении граничного условия в рекурсивной функции совершенно точно
приведёт к переполнению стека;
в большинстве языков существует ограничение на размер значений, которые можно сохранить в стек;

Куча

Куча используется для динамического выделения памяти, однако, в отличие от стека, данные в куче первым делом требуется
найти с помощью «оглавления». Можно представить, что куча это такая большая многоуровневая библиотека, в которой,
следуя определённым инструкциям, можно найти необходимую книгу.

операции на куче производятся несколько медленнее, чем на стеке, так как требуют дополнительного этапа для поиска данных;
в куче хранятся данные динамических размеров, например, список, в который можно добавлять произвольное количество элементов;
куча общая для всех потоков приложения;
вследствие динамической природы, куча нетривиальна в управлении и с ней возникает большинство всех проблем и ошибок,
связанных с памятью. Способы решения этих проблем предоставляются языками программирования;
типичные структуры данных, которые хранятся в куче — это глобальные переменные (они должны быть доступны для разных
потоков приложения, а куча как раз общая для всех потоков), ссылочные типы, такие как строки или ассоциативные массивы,
а так же другие сложные структуры данных;
при работе с кучей можно получить ошибки выхода за пределы памяти (out of memory), если приложение пытается использовать
больше памяти, чем ему доступно;
размер значений, которые могут храниться в куче, ограничен лишь общим объёмом памяти, который был выделен операционной
системой для программы.